import{b as N,u as v,r as n,j as e,A as u,c as w,o as C}from"./index-u7CGEq5-.js";const S=()=>{const h=N(),{cartItems:d,clearCart:p}=v(),[l,o]=n.useState(!1),[b,m]=n.useState(null),[a,g]=n.useState({fullName:"",email:"",address:"",city:"",phoneNumber:""}),c=d.reduce((r,t)=>r+t.price*t.quantity,0),x=0,y=c*.1,j=c+x+y,i=r=>{const{name:t,value:s}=r.target;g(k=>({...k,[t]:s}))},f=async r=>{r.preventDefault(),o(!0),m(null);try{const t=d.map(s=>({customerId:a.email,productId:s.id,quantity:s.quantity}));for(const s of t)await C.addOrder(s);p(),h("/order-success")}catch{m("Failed to place order. Please try again.")}finally{o(!1)}};return d.length===0?e.jsx("div",{className:"container mx-auto p-4",children:e.jsx(u,{type:"info",children:"Your cart is empty. Please add items before checking out."})}):e.jsxs("div",{className:"container mx-auto p-4",children:[e.jsx("h1",{className:"text-3xl font-bold mb-8 text-cyber-dark dark:text-cyber-light",children:"Checkout"}),b&&e.jsx(u,{type:"error",children:b}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white dark:bg-cyber-secondary/30 p-6 rounded-lg border border-cyber-primary/20",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 text-cyber-dark dark:text-cyber-light",children:"Shipping Details"}),e.jsxs("form",{onSubmit:f,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"fullName",className:"block text-sm font-medium text-cyber-dark dark:text-cyber-light mb-1",children:"Full Name"}),e.jsx("input",{type:"text",id:"fullName",name:"fullName",value:a.fullName,onChange:i,required:!0,className:"w-full p-3 bg-white dark:bg-cyber-dark/50 border border-cyber-primary/30 rounded-lg focus:ring-2 focus:ring-cyber-primary focus:border-transparent outline-none transition text-cyber-dark dark:text-cyber-light"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-cyber-dark dark:text-cyber-light mb-1",children:"Email"}),e.jsx("input",{type:"email",id:"email",name:"email",value:a.email,onChange:i,required:!0,className:"w-full p-3 bg-white dark:bg-cyber-dark/50 border border-cyber-primary/30 rounded-lg focus:ring-2 focus:ring-cyber-primary focus:border-transparent outline-none transition text-cyber-dark dark:text-cyber-light"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phoneNumber",className:"block text-sm font-medium text-cyber-dark dark:text-cyber-light mb-1",children:"Phone Number"}),e.jsx("input",{type:"text",id:"phoneNumber",name:"phoneNumber",value:a.phoneNumber,onChange:i,required:!0,className:"w-full p-3 bg-white dark:bg-cyber-dark/50 border border-cyber-primary/30 rounded-lg focus:ring-2 focus:ring-cyber-primary focus:border-transparent outline-none transition text-cyber-dark dark:text-cyber-light"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"address",className:"block text-sm font-medium text-cyber-dark dark:text-cyber-light mb-1",children:"Address"}),e.jsx("input",{type:"text",id:"address",name:"address",value:a.address,onChange:i,required:!0,className:"w-full p-3 bg-white dark:bg-cyber-dark/50 border border-cyber-primary/30 rounded-lg focus:ring-2 focus:ring-cyber-primary focus:border-transparent outline-none transition text-cyber-dark dark:text-cyber-light"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:e.jsxs("div",{children:[e.jsx("label",{htmlFor:"city",className:"block text-sm font-medium text-cyber-dark dark:text-cyber-light mb-1",children:"City"}),e.jsx("input",{type:"text",id:"city",name:"city",value:a.city,onChange:i,required:!0,className:"w-full p-3 bg-white dark:bg-cyber-dark/50 border border-cyber-primary/30 rounded-lg focus:ring-2 focus:ring-cyber-primary focus:border-transparent outline-none transition text-cyber-dark dark:text-cyber-light"})]})}),e.jsx("button",{type:"submit",disabled:l,className:`w-full py-3 bg-cyber-primary text-cyber-light rounded-lg font-semibold transition-all duration-300 text-lg ${l?"opacity-70 cursor-not-allowed":"hover:bg-cyber-primary-hover hover:shadow-lg"}`,children:l?e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx(w,{size:"small"}),"Processing..."]}):"Place Order"})]})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-cyber-secondary/30 p-6 rounded-lg border border-cyber-primary/20",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 text-cyber-dark dark:text-cyber-light",children:"Order Summary"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between text-cyber-dark dark:text-cyber-light",children:[e.jsx("span",{children:"Subtotal"}),e.jsxs("span",{children:["$",c.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-cyber-dark dark:text-cyber-light",children:[e.jsx("span",{children:"Shipping"}),e.jsxs("span",{children:["$",x.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-cyber-dark dark:text-cyber-light",children:[e.jsx("span",{children:"Tax"}),e.jsxs("span",{children:["$",y.toFixed(2)]})]}),e.jsx("div",{className:"pt-4 border-t border-cyber-primary/20",children:e.jsxs("div",{className:"flex justify-between text-lg font-semibold text-cyber-dark dark:text-cyber-light",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["$",j.toFixed(2)]})]})})]})]}),e.jsxs("div",{className:"bg-white dark:bg-cyber-secondary/30 p-6 rounded-lg border border-cyber-primary/20",children:[e.jsxs("h3",{className:"font-semibold mb-4 text-cyber-dark dark:text-cyber-light",children:["Order Items (",d.length,")"]}),e.jsx("div",{className:"space-y-4",children:d.map(r=>e.jsxs("div",{className:"flex gap-4",children:[e.jsx("img",{src:r.image,alt:r.name,className:"w-20 h-20 object-cover rounded"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-cyber-dark dark:text-cyber-light font-medium",children:r.name}),e.jsxs("p",{className:"text-sm text-cyber-muted",children:["Size: ",r.size," | Quantity: ",r.quantity]}),e.jsxs("p",{className:"text-cyber-primary",children:["$",r.price]})]})]},`${r.id}-${r.size}`))})]})]})]})]})};export{S as default};
